<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title href=h ttps://13stpb2fu9o8ievfc353kzj1-wpengine.netdna-ssl.com/wp-content/themes/sovrn-2016/favicon.ico>Sovrn | Site Review</title>
  <meta name="description" content="Site Review">
  <meta name="author" content="Matt">
  <script src='https://code.jquery.com/jquery-3.2.1.min.js' integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=' crossorigin='anonymous'></script>
  <link href="https://fonts.googleapis.com/css?family=Nova+Mono" rel="stylesheet">
  <style>
    .preheader {
      color: white;
      display: inline-block;
      width: 170px;
      height: 92px;
      background: url(http://www.sovrn.com/wp-content/themes/sovrn-2016/css/../img/sovrn_logo.png) no-repeat top left;
    }

    .container {
      width: 100%;
      height: auto;
    }

    .header {
      background-color: #57b6c3;
      width: 500px;
      font-family: 'Nova Mono', monospace;
      font-weight: bold;
      font-size: 3em;
      text-align: center;
      margin: auto;
      margin-top: 10px;
      padding: 20px;
      box-shadow: 5px 5px 10px #888888;
    }

    .formcontainer {
      text-align: center;
      margin: auto;
      width: 500px;
      margin-top: 15px;
    }

    #textfield {
      padding: 10px;
      border: solid 1px gainsboro;
      width: 500px;
      line-height: 3em;
      margin-left: -10px;
      font-size: 1em;
    }

    #btn {
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      width: 150px;
      margin-top: 10px;
      margin-left: 72%;
    }

    #btn:focus {
      outline: none
    }

    #valmessage {
      font-size: 2em;
      font-family: 'Nova Mono', monospace;
      margin-top: 5px;
      color: red;
    }

    .scores {
      min-width: 105%;
      text-align: left;
      padding-left: 0px;
      font-size: 1.5em;
      font-family: sans-serif, monospace;
    }

    .scores>li {
      margin: 2px;
      background-color: #57b6c3;
      margin-right: 28px;
      padding-left: 20px;
    }

    .scoreright {
      display: inline;
      float: right;
      padding-right: 20px;
    }

    #simcontainer {
      float: right;
    }
  </style>

  <script>
    function updateTxt(field) {
      var field = document.getElementById(field).value;
      var secondTab = 'http://api.adsafeprotected.com/db2/client/12113/absit?adsafe_url=' + field;
      var thirdTab = 'https://ratings2.pixalate.com/domain-details/' + field + '/GLOBAL/desktop';
      //var fourthTab = 'https://www.google.com/search?q=site:' + field + '+nsfw+OR+nude+OR+sex&source=lnms&tbm=isch&sa=X&ved=0ahUKEwiU_a2v3LvVAhVj0YMKHQHkBjgQ_AUIDCgD&biw=1280&bih=607&dpr=2' + "&output=embed";
      var fourthTab = 'https://www.bing.com/images/search?q=' + field + '&qs=n&form=QBIDMH&sp=-1&pq=' + field + 'sc=8-7&sk=&cvid=EC86E27C5C0C4B4189C6D7313E387CAB ';



      field = field.replace('https://', '');
      field = field.replace('http://', '');
      field = field.replace('www.', '');

      if (field.length === 0) {
        document.getElementById('valmessage').innerHTML = "*Please enter a URL*";
        return false;
      } else {
        $.ajax({
          xhrFields: {
            withCredentials: true
          },
          type: "GET",
          url: secondTab
        }).done(function(data) {
          var json = JSON.parse(data);

          //if (json.bsc && json.bsc.drg) {
          // return "No Info Provided";
          //}

          var iasinfo = "<li>Drugs  <div class=scoreright>" + (json.bsc && json.bsc.drg || 'No Score Found') + "</div></li>" +
            "<li>Alcohol  <div class=scoreright>" + (json.bsc && json.bsc.alc || 'No Score Found') + "</div></li>" +
            "<li>Offensive Content <div class=scoreright>" + (json.bsc && json.bsc.off || 'No Score Found') + "</div></li>" +
            "<li>Downloadable Media <div class=scoreright>" + (json.bsc && json.bsc.off || 'No Score Found') + "</div></li>" +
            "<li>Adult Content <div class=scoreright>" + (json.bsc && json.bsc.adt || 'No Score Found') + "</div></li>" +
            "<li>Suspicious Activity <div class=scoreright>" + (json.bsc && json.bsc.sam || 'No Score Found') + "</div></li>" +
            "<li>Hate Speech <div class=scoreright>" + (json.bsc && json.bsc.hat || 'No Score Found') + "</div></li>";

          var topList = "<ul class ='scores' style='list-style: none'>IAS SCORES" + iasinfo + "</ul>";
          $('#iasdata').hide();
          $('#iasdata').html(topList);
          $('#iasdata').fadeIn(500);

          var siminfo = '<iframe src = "//widget.similarweb.com/traffic/' + field + ' " ' +
            'frameborder = "0" width = "450" height = "200" style = "border: solid 1px #D7D7D7;"> </iframe>';
          $('#simdata').html(siminfo);

          var siminfo2 = '<iframe src="//widget.similarweb.com/sources/' + field + ' " ' +
          'frameborder="0" width="450" height="200" style="border: solid 1px #D7D7D7;"></iframe>';
          $('#traffic').html(siminfo2);




        });
        var currentWindow = window;
        tabOne = window.open('http://' + field, 'tabOne');
        tabOne.blur();
        window.focus();
        $("#gimage").attr("src", fourthTab);
        // window.open(secondTab, 'tabTwo');
        //window.open(thirdTab, 'tabThree');
        //window.open(fourthTab, 'tabFour');
        //currentWindow.focus();
        return false;
      }
    }

    function clearText() {
      document.getElementById('textfield').value = '';
    }
  </script>
</head>

<body style="background-color:#EEEEEE;">
  <div class="preheader"></div>
  <div class="container">
    <div class="content">
      <div class="header"> SITE REVIEW TOOL</div>
      <div class="formcontainer">
        <form onSubmit="return updateTxt('textfield');">
          <div class="textfield"><input name="textfield" type="text" id="textfield" placeholder="Website URL" class="search_input"></input>
          </div>
          <div class="button"><input type="submit" id="btn" value="Enter"></input>
          </div>
          <div id="valmessage"></div>
          <div id="iasdata"></div>
          <div id="simcontainer">
              <div id="simdata"></div>
              <div id="traffic"></div>
          </div>

        </form>
      </div>
    </div>
  </div>
</body>

</html>
